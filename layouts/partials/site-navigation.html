<nav class="mw9 center pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="{{ .Site.Home.RelPermalink }}" class="f3 fw2 hover-white no-underline glowy-pink-2 dib">
      {{ with .Site.Params.site_logo }}
        <img src="{{ relURL . }}" class="w100 mw5-ns" alt="{{ $.Site.Title }}" />
      {{ else }}
        {{ .Site.Title }}
      {{ end }}
    </a>
    <!-- mobile/md screen hamburger menu -->
    <div class="menu-container top-1 right-1 right-2-m dn-l">
      <div class="top-bar"></div>
      <div class="middle-bar"></div>
      <div class="bottom-bar"></div>
    </div>
    <div class="menu-overlay hide dn-l"></div>
    {{ partial "i18nlist.html" . }}
    <aside class="mobile-menu close dn-l">
      <div class="mobile-inner-cont">
        {{ if .Site.Menus.main }}
        <ul class="pl0 flex flex-column">
          {{ $currentPage := . }}
          {{ range .Site.Menus.main }}
          <li class="list f5 f4-ns fw4 dib mb4 {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }}active-tab-mobile{{ end }}">
            <a class="hover-white no-underline white-90" href="{{ .URL }}" title="{{ i18n " pageTitle" . }}">
              {{ .Name }}
            </a>
          </li>
          {{ end }}
        </ul>
        {{ end }}
        {{ partialCached "social-follow.html" . }}
      </div>
    </aside>      
    <!-- large screen navbar -->
    <div class="dn db-l flex-l items-center">
      {{ partial "i18nlist.html" . }}
      {{ if .Site.Menus.main }}
        <ul class="pl0 mr3">
          {{ $currentPage := . }}
          {{ range .Site.Menus.main }}
          <li class="list f5 f4-ns fw4 dib pr3 white-90 {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }}active-tab{{ end }}">
            <a class="to-glowy-pink no-underline color-inherit" href="{{ .URL }}" title="{{ i18n "pageTitle" . }}">
              {{ .Name }}
            </a>
          </li>
          {{ end }}
        </ul>
      {{ end }}
      {{ partialCached "social-follow.html" . }}
    </div>
  </div>
</nav>
<script>
  const hamMenu = document.querySelector('.menu-container');
  const mobileMenu = document.querySelector('.mobile-menu');
  const menuOverlay = document.querySelector('.menu-overlay');

  hamMenu.addEventListener('click', () => {
    if (!hamMenu.classList.contains('close')) {
      hamMenu.classList.add('close');
      mobileMenu.classList.add('active');
      menuOverlay.classList.add('active');
    } else {
      hamMenu.classList.remove('close');
      mobileMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
    }
  });

  menuOverlay.addEventListener('click', () => {
    if (!hamMenu.classList.contains('close')) {
      hamMenu.classList.add('close');
      mobileMenu.classList.add('active');
      menuOverlay.classList.add('active');
    } else {
      hamMenu.classList.remove('close');
      mobileMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
    }
  })
</script>
